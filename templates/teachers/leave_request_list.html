{% extends 'base.html' %}

{% block content %}
<div class="container mx-auto p-4">
  <h1 class="text-2xl font-semibold mb-4">Leave Requests</h1>
  <a href="{% url 'teachers:leave_request_create' %}" class="btn btn-primary mb-4">New Request</a>

  {% if leaves %}
    <table class="min-w-full bg-white">
      <thead>
        <tr>
          <th class="px-4 py-2">Teacher</th>
          <th class="px-4 py-2">Range</th>
          <th class="px-4 py-2">Status</th>
          <th class="px-4 py-2">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for l in leaves %}
        <tr class="border-t">
          <td class="px-4 py-2">{{ l.teacher }}</td>
          <td class="px-4 py-2">{{ l.start_date }} â†’ {{ l.end_date }}</td>
          <td class="px-4 py-2">{{ l.status }}</td>
          <td class="px-4 py-2">
            {% if user.is_staff %}
              <a href="{% url 'teachers:leave_request_action' l.id %}?action=approve" class="text-green-600 mr-2">Approve</a>
              <a href="{% url 'teachers:leave_request_action' l.id %}?action=reject" class="text-red-600">Reject</a>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No leave requests.</p>
  {% endif %}
</div>
{% endblock %}
